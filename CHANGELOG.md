# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Planning]

### 實體-組件機制
這是核心機制, 其他的機制都會依附在這個上面  
* 實體(Entity)
    * 實體編號(EntityID)
        * 是否要區分保護編號(Protect)跟量產編號(Product)
            * 保護編號在產生實體時, 以人工方式指定
                * 這樣就可以保持每次重開時編號不變
            * 量產編號在執行期產生實體時自動產生
    * 實體名稱
        * 給人看的, 程式內不用
    * 標籤名稱
        * 分類使用
    * 組件列表
        * 新增組件 / 移除組件 / 取得組件
    * 組件事件(event)處理
        * 固定事件: awake, start, dispose, update
            * awake: 當組件新增到實體時執行, 只執行一次
            * start: 當實體start時執行, 只執行一次
                * 如果實體已經start後才新增事件, 就會在組件新增到實體時執行
            * dispose: 當從實體移除時執行, 只執行一次
            * update: 實體update時執行
        * 做成4個單一函式介面, 有寫函式才會執行
            * 就不必每次都要把全部函式都時做出來, 很煩
    * 組件封包(packet)處理
        * 封包送到實體時執行
        * 註冊封包函式
        * 移除封包函式
    * 組件訊息(message)處理
        * 訊息送到實體時執行
        * 註冊訊息處理
        * 移除訊息處理
    * 內部處理通道
        * 當觸發各種事件時(event, packet, message), 通過統一的處理通道以及單一的goroutine來執行, 避免race condition
    * 執行緒鎖
        * 內部鎖!?
* 實體管理器
    * 新增保護實體 / 新增量產實體 / 移除實體 / 取得實體
    * 執行緒鎖
        * 內部鎖!?
* 組件(Component) !!!實體不能裝上重複組件!!!
    * 組件編號(ComponentID)
        * 不可重複且人工指定編號(寫程式時就要指定好)
    * 組件名稱
        * 給人看的, 程式內不用
    * 取得實體
        * 從組件反查實體
    * 如何解決自訂資料與程式碼產生的衝突
        * 產生組件程式碼時, 如果沒產生過extend結構與檔案, 就產生它
        * 並把extend結構附加於組件結構之中
        * 這樣使用者可以通過extend結構來替組件新增內容
            * 那麼extend如何使用組件原本的資料或功能呢?
                * 可能還是需要組件與extend雙向參照
                * 要在產生extend時也得產生NewExtend函式, 讓組件建立時可以填寫雙向參照
                * 執行緒鎖可能就讓使用者自己決定要不要建立
* 組件管理器
    * 新增組件 / 移除組件 / 取得組件
    * 執行緒鎖
        * 內部鎖!?

### 網路機制
接聽/連接到遠端, 並產生會話物件來進行封包發送與接收處理  
* 網路統一介面
    * 接聽(go)
    * 連接(go)
        * 只能連接一個服務端
    * 會話(go)
    * 客戶(go+cs)
        * 相當於連接組件與會話組件的組合, 專門給客戶端使用
        * 只能連接一個服務端
* tcp組件
    * 接聽(go)
    * 連接(go)
    * 會話(go)
    * 客戶(go+cs)
* udp組件
* http組件
* 網路機制如何接續到封包機制
* 網路機制自動代碼產生的範圍

### 封包機制
當要發送封包或是接收到封包時, 如何依序進行加密/解密, 序列化/反序列化, 路由/反路由處理程序  
* 封包管線介面
    * 可以自訂的序列化/反序列化機制
    * 可以自訂的加解密機制
    * 可以自訂的路由機制
* proto封包管線組件
* 封包機制如何接續到加解密機制
* 封包機制如何接續到路由機制
* 封包機制自動代碼產生的範圍

### 加解密機制
* ????加解密

### 路由機制
當發送封包時, 如何在封包中附上路由資訊  
當接收封包時, 如何解析路由資訊並轉發到正確目的地去  

### 組網機制
如何組織伺服器之間的連接關係  

### 日誌機制
提供接口讓內部的日誌可以輸出到使用者希望的組件上  

### 資料庫機制
如何初始化資料庫組件, 操作資料庫  
* redis
* mysql
* mongo
* 資料庫機制自動代碼產生的範圍